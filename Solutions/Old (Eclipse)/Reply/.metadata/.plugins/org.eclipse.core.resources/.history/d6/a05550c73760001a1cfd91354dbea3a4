#include <bits/stdc++.h>
using namespace std;

// structures and defines
#define lli long long int
// global variables

// functions
lli getexp(lli a, lli b, lli M) {
	lli r = 1;
	for (int i=1; i<=b; i++) r = (r*a)%M;
	return r;
}
void solve(int i) {
	lli N, M, R; cin >> R >> N >> M;

	lli sum = ((1-getexp(R, (N*N), M))/(1-R))%M;
	cout<<"Case #"<< i<<" :" << sum << endl;
}
int main() {
	// local variables
	int T;

	// input
	cin >> T;
	for (int i=1; i<=T; i++) {
		solve(i);
	}
	return 0;
}
